{
    "builders": [
      {
        "type": "googlecompute",
        "account_file": "/Users/neil/.gcp/eklhad/eklhad-web-e91c00f7deef.json",
        "project_id": "eklhad-web",
        "source_image": "ubuntu-1604-xenial-v20181204",
        "image_name": "eklhad-web-packer-{{timestamp}}",
        "machine_type": "n1-standard-1",
        "ssh_username": "ubuntu",
        "zone": "us-west1-a"
      }
    ],
    "provisioners": [
        {
            "type": "shell",
            "inline": [
                "mkdir -p /home/ubuntu/src/github.com/dahlke/eklhad/"
            ]
        },
        {
            "type": "file",
            "source": "./artifact/tar/linux/eklhad-web.tar.gz",
            "destination": "/home/ubuntu/src/github.com/dahlke/eklhad/eklhad-web.tar.gz"
        },
        {
            "type": "shell",
            "inline": [
                "tar -C /home/ubuntu/src/github.com/dahlke/eklhad/ -xf /home/ubuntu/src/github.com/dahlke/eklhad/eklhad-web.tar.gz"
            ]
        },
        {
            "type": "shell",
            "inline": [
                "sudo setcap CAP_NET_BIND_SERVICE=+eip /home/ubuntu/src/github.com/dahlke/eklhad/web/main"
            ]
        },
        {
            "type": "shell",
            "inline": [
                "sudo setcap CAP_NET_BIND_SERVICE=+eip /home/ubuntu/src/github.com/dahlke/eklhad/web/main.go"
            ]
        }

    ]
  }