{{ define "index" }}
    <!doctype html>
    <html lang="en">
        <head>
            <meta charset="utf-8">
            <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
            <title>Eklhad</title>
            <link rel="shortcut icon" type="image/x-icon" href="/static/assets/favicon.ico">
            <link rel="stylesheet" href="/static/styles/index.css">
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
                ga('create', 'UA-28453323-2', 'auto');
                ga('send', 'pageview');
            </script>
            <script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
            <link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />
        </head>
        <body>
            {{ template "body" . }}
        </body>
        <script>
            MAPBOX_PUB_KEY = "pk.eyJ1IjoibnRkIiwiYSI6ImhsTjRCZHcifQ.n0hx7Pe1GmCkQYYxBs0yjA";
            MAPBOX_MAP_ID = "ntd.26f2lhl5"

            L.mapbox.accessToken = MAPBOX_PUB_KEY

            var map = L.mapbox.map("map", MAPBOX_MAP_ID, {
                center: [37.7749, -122.4194],
                // dragging: false,
                attributionControl: false,
                zoomControl: false,
                zoom: 2,
                // TODO: set bounds!
                minZoom: 2,
                maxZoom: 8,
                worldCopyJump: true
            });

            EKLHAD_LOCATIONS = {{ .Locations }};
            for (var i = 0; i < EKLHAD_LOCATIONS.length; i++) {
                var loc = EKLHAD_LOCATIONS[i];
                var name = loc.Name;
                var lng = loc.Lng;
                var lat = loc.Lat;

                var map_latlng = L.latLng(lat, lng);
                var marker = L.marker(map_latlng, {
                    properties: {
                        type: 'location_marker',
                        id: loc.id
                    }
                });

                const popup = "<h3><b>" + name + "</b></h3><p>" + lat + " " + lng + "</p>";
                marker.bindPopup(popup, {
                    minWidth: 150
                });

                marker.addTo(map);
            }
        </script>
    </html>
{{end}}

{{ define "body" }}
    <div className="container">
        <h1>Neil Dahlke</h1>
        <h3>Engineer, <a target="_blank" href="http://www.memsql.com/">MemSQL</a>, (<a href="static/resume.html">Resume</a>)</h3>
        <h6>San Francisco, California, USA</h6>
        <h6>
            <a target="_blank" href="https://www.instagram.com/eklhad">Instagram</a> / <a target="_blank" href="https://www.github.com/dahlke">GitHub</a> / <a target="_blank" href="https://www.linkedin.com/in/neildahlke">LinkedIn</a>
        </h6>
        <div id="map"></div>
        {{ template "links" . }}
    </div>
{{ end }}


{{ define "links" }}
<div class="links">
    <h5>Press</h5>
    {{range .Links.PressLinks }}
     <div class="link" >
            <span class="date">[{{ .Date }}]</span>
            <span class="url"><a href={{ .Url }}>{{ .Name }}</a></span>
    </div>
    {{end}}
    <h5>Talks</h5>
    {{range .Links.TalkLinks }}
     <div class="link" >
            <span class="date">[{{ .Date }}]</span>
            <span class="url"><a href={{ .Url }}>{{ .Name }}</a></span>
    </div>
    {{end}}
    <h5>Blogs</h5>
    {{range .Links.BlogLinks }}
     <div class="link" >
            <span class="date">[{{ .Date }}]</span>
            <span class="url"><a href={{ .Url }}>{{ .Name }}</a></span>
    </div>
    {{end}}
    <h5>Demos</h5>
    {{range .Links.DemoLinks }}
     <div class="link" >
            <span class="date">[{{ .Date }}]</span>
            <span class="url"><a href={{ .Url }}>{{ .Name }}</a></span>
    </div>
    {{end}}
</div>
{{ end }}
